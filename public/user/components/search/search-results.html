<div class='scroll'>

  <!-- Section : Displaying the search results -->
  <div class='results-container' flex layout="column" layout-align="start start" style='overflow: auto; min-width: 300px; min-height: 300px;' >
    
    <!-- suggestions to add the next tags -->
    <div class='tags'>
      <div class='subheader' ng-if='suggested_tags.length > 0'>Add another tag ...</div>
      <!-- <div class='subheader' ng-if='suggested_tags.length == 0'>No other tags to add</div> -->
      <span class='pointer' ng-repeat='tag in suggested_tags | orderBy: "-count"' ng-click='addTagToSearch(tag.id)'>
              #{{ getTagString(tag.id).name }}
              <md-tooltip md-delay="400" md-direction="bottom" md-autohide="true">
                {{ tag.count }} post(s) contain this tag
              </md-tooltip>
      </span>
    </div>


    <!-- results-->
    <div layout="row" layout-xs="column" layout-wrap style='min-width: 300px; min-height: 200px;'>

      <!-- adding a new node in this space; hidden if timed space is expired -->
      <md-card class='empty-card' md-theme="default" ng-if='expired == false' dnd-type="'space'" dnd-allowed-types="['post']" dnd-list dnd-drop='addNodeToSpace(item)' dnd-draggable='{status: 1}' dnd-callback='fork()'>
        <div class='dragBar'></div>
        <md-content style="height: 100%; font-size: 14px; padding: 15px; overflow: hidden;" layout='column'>
            <a id='addNode' ui-sref='home.node(newnodepath)'>
              <ng-md-icon icon="add_box" style="fill: gray" size="36">
              </ng-md-icon>
            </a>
            <span class='space-name' ng-if='space_name != "..."'><b>{{space_name}}</b></span>
            <span class='space-name'><b><span ng-repeat='t in _tags'>#{{getTagString(t).name}} </span></b></span>
        </md-content>
      </md-card>

      <!-- expired message container -->
      <md-card class='empty-card' md-theme="default" ng-if='expired == true' layout-align='center'>
          <div class='dragBar'></div>
          <ng-md-icon icon="lock" style="fill: gray" size="48">
            <!-- <md-tooltip md-delay="400" md-direction="bottom" md-autohide="true">
             The last date to submit to this space has passed. You can still save nodes to this space in your own folder but they will not be displayed in this space.
            </md-tooltip> -->
          </ng-md-icon>
          
      </md-card>

      <!-- the results when results exist-->
      <md-card class='pointer mini-post' ng-repeat='post in posts | orderBy:"-dateCreated" | filter: {contentType: "!comment"}'   
              dnd-type="'post'" 
              dnd-draggable='post' 
              ng-click='goToNode(post.id)'> 
        
        <div class='dragBar'></div>

        
        <div class='action-bar' style='position: absolute;height: 30px; width: 30px; top: 4px; right: -1px; text-align: center;' ng-init='postStatus = getPostStatus(post)[0]'>
          <ng-md-icon icon="check_circle" style="fill: #8FE266" size="16" ng-if='postStatus == "viewed"'>
          </ng-md-icon>
          <ng-md-icon icon="fingerprint" style="fill: #2919F7" size="16" ng-if='postStatus == "created"'>
          </ng-md-icon>
          <ng-md-icon icon="thumb_up" style="fill: #C1BB08" size="16" ng-if='postStatus == "liked"'>
          </ng-md-icon>
          <ng-md-icon icon="bookmark" style="fill: #4D4AC7" size="16" ng-if='postStatus == "bookmarked"'>
          </ng-md-icon>
        </div>
        <md-tooltip md-direction="bottom" md-autohide="true"> You {{postStatus}} this post </md-tooltip>


        <md-content layout='column' layout-fill>
            <div class='poster' ng-style='getPostBackground(post)'>
              <div class='post-title' ng-if='post.attachments[0].id == null'>{{post.title}}</div>
            </div>

            <md-divider></md-divider>

            <div class='post-details'>
                <div class='post-title' ng-if='post.attachments[0].id != null'>{{post.title}}</div>
                <div class='author-avatar'>{{getUserAvatar(post.createdBy)}}</div>
                <div class='author-name'>{{getUserName(post.createdBy)}}</div> 
                <div class='small'>{{post.dateCreated |  date: 'mediumDate' }}</div>
            </div>
        </md-content>



      </md-card>

      <!-- todo: message when results don't exist -->
      <!-- <div></div> -->

    </div>

  </div>

  <!-- Section : About the Space -->
  <!-- <div flex-gt-xs="20" layout-align="top">  
    <ng-include src="'components/search/space_sidebar.html'"></ng-include>
  </div> -->


</div>
